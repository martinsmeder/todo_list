(()=>{"use strict";const e=(e,t,n,a,c)=>({title:e,description:t,priority:n,dueDate:a,isDone:c}),t=(()=>{const t=[],n=()=>{localStorage.setItem("itemArray",JSON.stringify(t))};return(()=>{const e=JSON.parse(localStorage.getItem("itemArray"));e&&Array.isArray(e)&&(t.length=0,t.push(...e))})(),{itemArray:t,createItem:(a,c,r,o,i)=>{const l=e(a,c,r,o,i);return t.push(l),n(),l},deleteItem:e=>{const a=t.indexOf(e);a>-1&&(t.splice(a,1),n())},editItem:async(e,t,a,c,r,o)=>{e.title=t,e.description=a,e.priority=c,e.dueDate=new Date(r),e.isDone=o,n()},toggleIsDone:e=>{e.isDone=!e.isDone,n()},getAllItems:()=>t}})(),n=(()=>{const t=[],a=()=>{localStorage.setItem("projectArray",JSON.stringify(t))};return(()=>{const e=JSON.parse(localStorage.getItem("projectArray"));e&&Array.isArray(e)&&(t.length=0,t.push(...e))})(),{projectArray:t,createProject:e=>{const n=((e,t=[])=>({title:e,array:t}))(e,[]);return t.push(n),a(),n},deleteProject:e=>{const n=t.indexOf(e);n>-1&&(t.splice(n,1),a())},editProject:(e,t)=>{e.title=t,a()},addProjectItem:(t,n,c,r,o,i)=>{const l=e(n,c,r,o,i);return t.array.push(l),a(),l},deleteProjectItem:(e,t)=>{const n=e.array.indexOf(t);n>-1&&(e.array.splice(n,1),a())},getAllProjects:()=>t,getProjectByTitle:e=>n.getAllProjects().find((t=>t.title===e))}})(),a=(()=>{const e=e=>{const t=new Date;t.setHours(0,0,0,0);const n=new Date(e);return n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()},a=e=>{const t=new Date;t.setHours(0,0,0,0);const n=new Date(Date.parse(e)),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+(7-t.getDay()));return n>=t&&n<=a};return{isDueToday:e,isDueThisWeek:a,getAllDailyItems:()=>{const a=[],c=[...t.itemArray];return n.projectArray.forEach((e=>{c.push(...e.array)})),c.forEach((t=>{e(t.dueDate)&&a.push(t)})),a},getAllWeeklyItems:()=>{const e=[],c=[...t.itemArray];return n.projectArray.forEach((e=>{c.push(...e.array)})),c.forEach((t=>{a(t.dueDate)&&e.push(t)})),e},getAllTotalItems:()=>{const e=[...t.itemArray];return n.projectArray.forEach((t=>{e.push(...t.array)})),e}}})();async function c(e){const n=document.createElement("div");n.classList.add("card");const a=document.createElement("div");a.classList.add("left");const r=document.createElement("div");r.classList.add("right");const i=document.createElement("div");i.classList.add("priority"),"low"===e.priority?i.classList.add("low"):"medium"===e.priority?i.classList.add("medium"):"high"===e.priority&&i.classList.add("high");const l=document.createElement("input");l.classList.add("left"),l.type="checkbox",l.checked=e.isDone,l.addEventListener("click",(async()=>{await t.toggleIsDone(e)}));const s=document.createElement("p");s.textContent=e.title;const d=document.createElement("p"),m={day:"numeric",month:"short",year:"2-digit"};if("string"==typeof e.dueDate){const t=new Date(e.dueDate);d.textContent=t.toLocaleDateString("en-US",m)}else d.textContent=e.dueDate.toLocaleDateString("en-US",m);const u=document.createElement("img");u.src="images/edit.png",u.addEventListener("click",(()=>{const a=function(e,n){const a=document.createElement("form");a.classList.add("form");const r=document.createElement("input");r.type="text",r.name="title",r.value=e.title;const i=document.createElement("textarea");i.name="description",i.value=e.description;const l=document.createElement("select");l.name="priority";const s=document.createElement("option");s.value="low",s.text="Low Priority",l.appendChild(s);const d=document.createElement("option");d.value="medium",d.text="Medium Priority",l.appendChild(d);const m=document.createElement("option");m.value="high",m.text="High Priority",l.appendChild(m),l.value=e.priority;const u=document.createElement("input");u.type="date",u.name="dueDate";const p=e.dueDate instanceof Date?e.dueDate:new Date(e.dueDate);u.value=p.toISOString().slice(0,10);const y=document.createElement("input");y.type="checkbox",y.name="isDone",y.checked=e.isDone;const h=document.createElement("label");h.textContent="Completed",h.appendChild(y);const g=document.createElement("button");return g.type="submit",g.textContent="Update Item",a.appendChild(r),a.appendChild(i),a.appendChild(l),a.appendChild(u),a.appendChild(h),a.appendChild(g),a.addEventListener("submit",(async r=>{r.preventDefault();const i=r.target.elements.title.value,l=r.target.elements.description.value,s=r.target.elements.priority.value,d=new Date(r.target.elements.dueDate.value);d.setHours(0,0,0,0);const m=r.target.elements.isDone.checked;await t.editItem(e,i,l,s,d,m),n.replaceWith(await c(e)),r.target.reset(),a.style.display="none",await o()})),a}(e,n);n.replaceWith(a)}));const p=document.createElement("img");return p.src="images/delete.png",p.addEventListener("click",(async a=>{a.preventDefault(),await t.deleteItem(e),n.remove()})),a.appendChild(i),a.appendChild(l),a.appendChild(s),n.appendChild(a),r.appendChild(d),r.appendChild(u),r.appendChild(p),n.appendChild(r),n}async function r(e){const t=document.createElement("div");t.classList.add("card");const a=document.createElement("div");a.classList.add("left");const c=document.createElement("div");c.classList.add("right");const o=document.createElement("a");o.href="#",o.textContent=e.title,o.addEventListener("click",(async()=>{document.querySelectorAll("#allItems a").forEach((e=>{e.classList.remove("active")})),document.querySelectorAll("#projectContainer > .card").forEach((e=>{e.classList.remove("active")})),t.classList.add("active"),await l(e)}));const s=document.createElement("img");s.src="images/edit.png",s.addEventListener("click",(()=>{const a=function(e,t){const a=document.createElement("form");a.classList.add("form");const c=document.createElement("input");c.type="text",c.name="title",c.value=e.title;const o=document.createElement("button");return o.type="submit",o.textContent="Update Project",a.appendChild(c),a.appendChild(o),a.addEventListener("submit",(async c=>{c.preventDefault();const o=c.target.elements.title.value;await n.editProject(e,o),t.replaceWith(await r(e)),c.target.reset(),a.style.display="none",await i()})),a}(e,t);t.replaceWith(a)}));const d=document.createElement("img");return d.src="images/delete.png",d.addEventListener("click",(async a=>{a.preventDefault(),await n.deleteProject(e),t.remove()})),a.appendChild(o),c.appendChild(s),c.appendChild(d),t.appendChild(a),t.appendChild(c),t}async function o(){const e=document.querySelector("#content");return e.textContent="",document.querySelectorAll(".card").forEach((e=>{e.classList.remove("active")})),document.querySelector("#allItems a:first-child").classList.add("active"),(await a.getAllTotalItems()).forEach((async t=>{const n=await c(t);e.appendChild(n)})),e}async function i(){const e=document.querySelector("#projectContainer");return e.textContent="",(await n.getAllProjects()).forEach((async t=>{const n=await r(t);e.appendChild(n)})),e}async function l(e){const t=document.querySelector("#content");return t.textContent="",e.array.forEach((async e=>{const n=await c(e);t.appendChild(n)})),t}console.log("This seem to be working..."),async function(e){o(),i();const r=document.querySelectorAll("#allItems a");r.forEach((e=>{e.addEventListener("click",(e=>{r.forEach((e=>{e.classList.remove("active")})),e.target.classList.add("active"),document.querySelectorAll(".card").forEach((e=>{e.classList.remove("active")}))}))})),document.querySelector("#allItems a:first-child").addEventListener("click",(async()=>{await o()})),document.querySelector("#allItems a:nth-child(2)").addEventListener("click",(async()=>{await async function(){const e=document.querySelector("#content");return e.textContent="",(await a.getAllDailyItems()).forEach((async t=>{const n=await c(t);e.appendChild(n)})),e}()})),document.querySelector("#allItems a:nth-child(3)").addEventListener("click",(async()=>{await async function(){const e=document.querySelector("#content");return e.textContent="",(await a.getAllWeeklyItems()).forEach((async t=>{const n=await c(t);e.appendChild(n)})),e}()})),document.querySelector("#newTaskBtn").addEventListener("click",(()=>{!function(){const e=document.querySelector("#content"),a=document.createElement("form");a.classList.add("form");const c=document.createElement("input");c.type="text",c.name="title",c.placeholder="Title",c.required=!0;const r=document.createElement("textarea");r.name="description",r.placeholder="Description";const i=document.createElement("select");i.name="project",n.getAllProjects().forEach((e=>{const t=document.createElement("option");t.value=e.title,t.text=e.title,i.appendChild(t)}));const s=document.createElement("option");s.value="noProject",s.text="No Project",i.appendChild(s);const d=document.createElement("select");d.name="priority";const m=document.createElement("option");m.value="low",m.text="Low Priority",d.appendChild(m);const u=document.createElement("option");u.value="medium",u.text="Medium Priority",d.appendChild(u);const p=document.createElement("option");p.value="high",p.text="High Priority",d.appendChild(p);const y=document.createElement("input");y.type="date",y.name="dueDate",y.required=!0;const h=document.createElement("input");h.type="checkbox",h.name="isDone";const g=document.createElement("label");g.textContent="Completed",g.appendChild(h);const E=document.createElement("button");E.type="submit",E.textContent="Create Item",a.appendChild(c),a.appendChild(r),a.appendChild(i),a.appendChild(d),a.appendChild(y),a.appendChild(g),a.appendChild(E),a.addEventListener("submit",(async e=>{e.preventDefault();const c=e.target.elements.project.value,r=n.getProjectByTitle(c),i=e.target.elements.title.value,s=e.target.elements.description.value,d=e.target.elements.priority.value,m=new Date(e.target.elements.dueDate.value);m.setHours(0,0,0,0);const u=e.target.elements.isDone.checked;"noProject"===c?(await t.createItem(i,s,d,m,u),e.target.reset(),a.style.display="none",await o()):r&&(await n.addProjectItem(r,i,s,d,m,u),e.target.reset(),a.style.display="none",await l(r))})),e.appendChild(a)}()})),document.querySelector("#newProjectBtn").addEventListener("click",(()=>{!function(){const e=document.querySelector("#content"),t=document.createElement("form");t.classList.add("form");const a=document.createElement("input");a.type="text",a.name="title",a.placeholder="Title",a.required=!0;const c=document.createElement("button");c.type="submit",c.textContent="Create Project",t.appendChild(a),t.appendChild(c),t.addEventListener("submit",(e=>{e.preventDefault();const a=e.target.elements.title.value;n.createProject(a),e.target.reset(),t.style.display="none",i()})),e.appendChild(t)}()}))}()})();