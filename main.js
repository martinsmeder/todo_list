(()=>{"use strict";const e=(e,t,n,a,c)=>({title:e,description:t,priority:n,dueDate:a,isDone:c}),t=(()=>{const t=[];return{itemArray:t,createItem:(n,a,c,o,r)=>{const i=e(n,a,c,o,r);return t.push(i),i},deleteItem:e=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},editItem:async(e,t,n,a,c,o)=>{e.title=t,e.description=n,e.priority=a,e.dueDate=c,e.isDone=o},toggleIsDone:e=>{e.isDone=!e.isDone},getAllItems:()=>t}})(),n=(()=>{const t=[];return{projectArray:t,createProject:e=>{const n=((e,t=[])=>({title:e,array:t}))(e,[]);return t.push(n),n},deleteProject:e=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},editProject:(e,t)=>{e.title=t},addProjectItem:(t,n,a,c,o,r)=>{const i=e(n,a,c,o,r);return t.array.push(i),i},deleteProjectItem:(e,t)=>{const n=e.array.indexOf(t);n>-1&&e.array.splice(n,1)},getAllProjects:()=>t,getProjectByTitle:e=>n.getAllProjects().find((t=>t.title===e))}})(),a=(()=>{const e=e=>{const t=new Date;t.setHours(0,0,0,0);const n=new Date(e);return n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()},a=e=>{const t=new Date;t.setHours(0,0,0,0);const n=new Date(Date.parse(e)),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+(7-t.getDay()));return n>=t&&n<=a};return{isDueToday:e,isDueThisWeek:a,getAllDailyItems:()=>{const a=[],c=[...t.itemArray];return n.projectArray.forEach((e=>{c.push(...e.array)})),c.forEach((t=>{e(t.dueDate)&&a.push(t)})),a},getAllWeeklyItems:()=>{const e=[],c=[...t.itemArray];return n.projectArray.forEach((e=>{c.push(...e.array)})),c.forEach((t=>{a(t.dueDate)&&e.push(t)})),e},getAllTotalItems:()=>{const e=[...t.itemArray];return n.projectArray.forEach((t=>{e.push(...t.array)})),e}}})(),c=(t.createItem("Item1","First item","medium",new Date(2023,4,11),!1),t.createItem("Item2","Second item","high",new Date(2023,4,12),!1),t.createItem("Item3","Third item","low",new Date(2023,4,13),!1),n.createProject("aProject",[]));async function o(e){const n=document.createElement("div");n.classList.add("card");const a=document.createElement("div");a.classList.add("left");const c=document.createElement("div");c.classList.add("right");const r=document.createElement("div");r.classList.add("priority"),"low"===e.priority?r.classList.add("low"):"medium"===e.priority?r.classList.add("medium"):"high"===e.priority&&r.classList.add("high");const l=document.createElement("input");l.classList.add("left"),l.type="checkbox",l.checked=e.isDone,l.addEventListener("click",(async()=>{await t.toggleIsDone(e)}));const d=document.createElement("p");d.textContent=e.title;const s=document.createElement("p");s.textContent=e.dueDate.toLocaleDateString("en-US",{day:"numeric",month:"short",year:"2-digit"});const m=document.createElement("img");m.src="images/edit.png",m.addEventListener("click",(()=>{const a=function(e,n){const a=document.createElement("form");a.classList.add("form");const c=document.createElement("input");c.type="text",c.name="title",c.value=e.title;const r=document.createElement("textarea");r.name="description",r.value=e.description;const l=document.createElement("select");l.name="priority";const d=document.createElement("option");d.value="low",d.text="Low Priority",l.appendChild(d);const s=document.createElement("option");s.value="medium",s.text="Medium Priority",l.appendChild(s);const m=document.createElement("option");m.value="high",m.text="High Priority",l.appendChild(m),l.value=e.priority;const u=document.createElement("input");u.type="date",u.name="dueDate",u.value=e.dueDate.toISOString().slice(0,10);const p=document.createElement("input");p.type="checkbox",p.name="isDone",p.checked=e.isDone;const h=document.createElement("label");h.textContent="Completed",h.appendChild(p);const y=document.createElement("button");return y.type="submit",y.textContent="Update Item",a.appendChild(c),a.appendChild(r),a.appendChild(l),a.appendChild(u),a.appendChild(h),a.appendChild(y),a.addEventListener("submit",(async c=>{c.preventDefault();const r=c.target.elements.title.value,l=c.target.elements.description.value,d=c.target.elements.priority.value,s=new Date(c.target.elements.dueDate.value);s.setHours(0,0,0,0);const m=c.target.elements.isDone.checked;await t.editItem(e,r,l,d,s,m),n.replaceWith(await o(e)),c.target.reset(),a.style.display="none",await i()})),a}(e,n);n.replaceWith(a)}));const u=document.createElement("img");return u.src="images/delete.png",u.addEventListener("click",(async a=>{a.preventDefault(),await t.deleteItem(e),n.remove()})),a.appendChild(r),a.appendChild(l),a.appendChild(d),n.appendChild(a),c.appendChild(s),c.appendChild(m),c.appendChild(u),n.appendChild(c),n}async function r(e){const t=document.createElement("div");t.classList.add("card");const a=document.createElement("div");a.classList.add("left");const c=document.createElement("div");c.classList.add("right");const o=document.createElement("a");o.href="#",o.textContent=e.title,o.addEventListener("click",(async()=>{document.querySelectorAll("#allItems a").forEach((e=>{e.classList.remove("active")})),document.querySelectorAll("#projectContainer > .card").forEach((e=>{e.classList.remove("active")})),t.classList.add("active"),await d(e)}));const i=document.createElement("img");i.src="images/edit.png",i.addEventListener("click",(()=>{const a=function(e,t){const a=document.createElement("form");a.classList.add("form");const c=document.createElement("input");c.type="text",c.name="title",c.value=e.title;const o=document.createElement("button");return o.type="submit",o.textContent="Update Project",a.appendChild(c),a.appendChild(o),a.addEventListener("submit",(async c=>{c.preventDefault();const o=c.target.elements.title.value;await n.editProject(e,o),t.replaceWith(await r(e)),c.target.reset(),a.style.display="none",await l()})),a}(e,t);t.replaceWith(a)}));const s=document.createElement("img");return s.src="images/delete.png",s.addEventListener("click",(async a=>{a.preventDefault(),await n.deleteProject(e),t.remove()})),a.appendChild(o),c.appendChild(i),c.appendChild(s),t.appendChild(a),t.appendChild(c),t}async function i(){const e=document.querySelector("#content");return e.textContent="",document.querySelectorAll(".card").forEach((e=>{e.classList.remove("active")})),document.querySelector("#allItems a:first-child").classList.add("active"),(await a.getAllTotalItems()).forEach((async t=>{const n=await o(t);e.appendChild(n)})),e}async function l(){const e=document.querySelector("#projectContainer");return e.textContent="",(await n.getAllProjects()).forEach((async t=>{const n=await r(t);e.appendChild(n)})),e}async function d(e){const t=document.querySelector("#content");return t.textContent="",e.array.forEach((async e=>{const n=await o(e);t.appendChild(n)})),t}n.addProjectItem(c,"Item4","Fourth item","medium",new Date(2023,4,11),!1),n.addProjectItem(c,"Item5","Fifth item","high",new Date(2023,4,12),!1),n.addProjectItem(c,"Item6","Sixth item","low",new Date(2023,4,13),!1),console.log("This seem to be working..."),async function(e){i(),l();const c=document.querySelectorAll("#allItems a");c.forEach((e=>{e.addEventListener("click",(e=>{c.forEach((e=>{e.classList.remove("active")})),e.target.classList.add("active"),document.querySelectorAll(".card").forEach((e=>{e.classList.remove("active")}))}))})),document.querySelector("#allItems a:first-child").addEventListener("click",(async()=>{await i()})),document.querySelector("#allItems a:nth-child(2)").addEventListener("click",(async()=>{await async function(){const e=document.querySelector("#content");return e.textContent="",(await a.getAllDailyItems()).forEach((async t=>{const n=await o(t);e.appendChild(n)})),e}()})),document.querySelector("#allItems a:nth-child(3)").addEventListener("click",(async()=>{await async function(){const e=document.querySelector("#content");return e.textContent="",(await a.getAllWeeklyItems()).forEach((async t=>{const n=await o(t);e.appendChild(n)})),e}()})),document.querySelector("#newTaskBtn").addEventListener("click",(()=>{!function(){const e=document.querySelector("#content"),a=document.createElement("form");a.classList.add("form");const c=document.createElement("input");c.type="text",c.name="title",c.placeholder="Title",c.required=!0;const o=document.createElement("textarea");o.name="description",o.placeholder="Description";const r=document.createElement("select");r.name="project",n.getAllProjects().forEach((e=>{const t=document.createElement("option");t.value=e.title,t.text=e.title,r.appendChild(t)}));const l=document.createElement("option");l.value="noProject",l.text="No Project",r.appendChild(l);const s=document.createElement("select");s.name="priority";const m=document.createElement("option");m.value="low",m.text="Low Priority",s.appendChild(m);const u=document.createElement("option");u.value="medium",u.text="Medium Priority",s.appendChild(u);const p=document.createElement("option");p.value="high",p.text="High Priority",s.appendChild(p);const h=document.createElement("input");h.type="date",h.name="dueDate",h.required=!0;const y=document.createElement("input");y.type="checkbox",y.name="isDone";const E=document.createElement("label");E.textContent="Completed",E.appendChild(y);const g=document.createElement("button");g.type="submit",g.textContent="Create Item",a.appendChild(c),a.appendChild(o),a.appendChild(r),a.appendChild(s),a.appendChild(h),a.appendChild(E),a.appendChild(g),a.addEventListener("submit",(async e=>{e.preventDefault();const c=e.target.elements.project.value,o=n.getProjectByTitle(c),r=e.target.elements.title.value,l=e.target.elements.description.value,s=e.target.elements.priority.value,m=new Date(e.target.elements.dueDate.value);m.setHours(0,0,0,0);const u=e.target.elements.isDone.checked;"noProject"===c?(await t.createItem(r,l,s,m,u),e.target.reset(),a.style.display="none",await i()):o&&(await n.addProjectItem(o,r,l,s,m,u),e.target.reset(),a.style.display="none",await d(o))})),e.appendChild(a)}()})),document.querySelector("#newProjectBtn").addEventListener("click",(()=>{!function(){const e=document.querySelector("#content"),t=document.createElement("form");t.classList.add("form");const a=document.createElement("input");a.type="text",a.name="title",a.placeholder="Title",a.required=!0;const c=document.createElement("button");c.type="submit",c.textContent="Create Project",t.appendChild(a),t.appendChild(c),t.addEventListener("submit",(e=>{e.preventDefault();const a=e.target.elements.title.value;n.createProject(a),e.target.reset(),t.style.display="none",l()})),e.appendChild(t)}()}))}()})();