(()=>{"use strict";const e=(e,t,n,a,c)=>({title:e,description:t,priority:n,dueDate:a,isDone:c}),t=(e,t=[])=>({title:e,array:t}),n=(()=>{const t=[],n=()=>{localStorage.setItem("itemArray",JSON.stringify(t))};return(()=>{const e=JSON.parse(localStorage.getItem("itemArray"));e&&Array.isArray(e)&&(t.length=0,t.push(...e))})(),{itemArray:t,createItem:(a,c,o,r,s)=>{const i=e(a,c,o,r,s);return t.push(i),n(),i},deleteItem:e=>{const a=t.indexOf(e);a>-1&&(t.splice(a,1),n())},editItem:async(e,t,a,c,o,r)=>{e.title=t,e.description=a,e.priority=c,e.dueDate=new Date(o),e.isDone=r,n()},toggleIsDone:e=>{e.isDone=!e.isDone,n()},getAllItems:()=>t}})(),a=(()=>{const n=[],c=()=>{localStorage.setItem("projectArray",JSON.stringify(n))};return(()=>{const e=JSON.parse(localStorage.getItem("projectArray"));e&&Array.isArray(e)&&(n.length=0,n.push(...e))})(),{projectArray:n,createProject:e=>{const a=t(e,[]);return n.push(a),c(),a},deleteProject:e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),c())},editProject:(e,t)=>{e.title=t,c()},addProjectItem:(t,n,a,o,r,s)=>{const i=e(n,a,o,r,s);return t.array.push(i),c(),i},deleteProjectItem:(e,t)=>{const n=e.array.indexOf(t);n>-1&&(e.array.splice(n,1),c())},getAllProjects:()=>n,getProjectByTitle:e=>a.getAllProjects().find((t=>t.title===e))}})(),c=(()=>{const e=e=>{const t=new Date;t.setHours(0,0,0,0);const n=new Date(e);return n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()},t=e=>{const t=new Date;t.setHours(0,0,0,0);const n=new Date(Date.parse(e)),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+(7-t.getDay()));return n>=t&&n<=a};return{isDueToday:e,isDueThisWeek:t,getAllDailyItems:()=>{const t=[],c=[...n.itemArray];return a.projectArray.forEach((e=>{c.push(...e.array)})),c.forEach((n=>{e(n.dueDate)&&t.push(n)})),t},getAllWeeklyItems:()=>{const e=[],c=[...n.itemArray];return a.projectArray.forEach((e=>{c.push(...e.array)})),c.forEach((n=>{t(n.dueDate)&&e.push(n)})),e},getAllTotalItems:()=>{const e=[...n.itemArray];return a.projectArray.forEach((t=>{e.push(...t.array)})),e}}})(),o=new Date,r=new Date;r.setDate(r.getDate()+1);const s=new Date;s.setDate(s.getDate()+2);const i=new Date;i.setDate(i.getDate()+30);const l=e("Finish this lengthy todo list project","Some words","low",o,!0);n.itemArray.push(l);const d=e("Buy snus and coffee to celebrate","Some words","medium",r,!1);n.itemArray.push(d);const m=e("Ingest snus and coffee","Some words","high",s,!1);n.itemArray.push(m);const u=t("Merge with AI",[]);a.projectArray.push(u);const p=e("Acquire lots of money","Some words","low",o,!1);u.array.push(p);const h=e("Pre-order neuralink","Some words","medium",r,!1);u.array.push(h);const y=e("Profit","Some words","high",s,!1);u.array.push(y);const g=t("Future thing",[]);a.projectArray.push(g);const E=e("The thing that never get done","Some words","low",i,!1);async function v(e){const t=document.createElement("div");t.classList.add("card");const a=document.createElement("div");a.classList.add("left");const c=document.createElement("div");c.classList.add("right");const o=document.createElement("div");o.classList.add("priority"),"low"===e.priority?o.classList.add("low"):"medium"===e.priority?o.classList.add("medium"):"high"===e.priority&&o.classList.add("high");const r=document.createElement("input");r.classList.add("left"),r.type="checkbox",r.checked=e.isDone,r.addEventListener("click",(async()=>{await n.toggleIsDone(e)}));const s=document.createElement("p");s.textContent=e.title;const i=document.createElement("p"),l={day:"numeric",month:"short",year:"2-digit"};if("string"==typeof e.dueDate){const t=new Date(e.dueDate);i.textContent=t.toLocaleDateString("en-US",l)}else i.textContent=e.dueDate.toLocaleDateString("en-US",l);const d=document.createElement("img");d.src="images/edit.png",d.addEventListener("click",(()=>{const a=function(e,t){const a=document.createElement("form");a.classList.add("form");const c=document.createElement("input");c.type="text",c.name="title",c.value=e.title;const o=document.createElement("textarea");o.name="description",o.value=e.description;const r=document.createElement("select");r.name="priority";const s=document.createElement("option");s.value="low",s.text="Low Priority",r.appendChild(s);const i=document.createElement("option");i.value="medium",i.text="Medium Priority",r.appendChild(i);const l=document.createElement("option");l.value="high",l.text="High Priority",r.appendChild(l),r.value=e.priority;const d=document.createElement("input");d.type="date",d.name="dueDate";const m=e.dueDate instanceof Date?e.dueDate:new Date(e.dueDate);d.value=m.toISOString().slice(0,10);const u=document.createElement("input");u.type="checkbox",u.name="isDone",u.checked=e.isDone;const p=document.createElement("label");p.textContent="Completed",p.appendChild(u);const h=document.createElement("button");return h.type="submit",h.textContent="Update Item",a.appendChild(c),a.appendChild(o),a.appendChild(r),a.appendChild(d),a.appendChild(p),a.appendChild(h),a.addEventListener("submit",(async c=>{c.preventDefault();const o=c.target.elements.title.value,r=c.target.elements.description.value,s=c.target.elements.priority.value,i=new Date(c.target.elements.dueDate.value);i.setHours(0,0,0,0);const l=c.target.elements.isDone.checked;await n.editItem(e,o,r,s,i,l),t.replaceWith(await v(e)),c.target.reset(),a.style.display="none",await D()})),a}(e,t);t.replaceWith(a)}));const m=document.createElement("img");return m.src="images/delete.png",m.addEventListener("click",(async a=>{a.preventDefault(),await n.deleteItem(e),t.remove()})),a.appendChild(o),a.appendChild(r),a.appendChild(s),t.appendChild(a),c.appendChild(i),c.appendChild(d),c.appendChild(m),t.appendChild(c),t}async function C(e){const t=document.createElement("div");t.classList.add("card");const n=document.createElement("div");n.classList.add("left");const c=document.createElement("div");c.classList.add("right");const o=document.createElement("a");o.href="#",o.textContent=e.title,o.addEventListener("click",(async()=>{document.querySelectorAll("#allItems a").forEach((e=>{e.classList.remove("active")})),document.querySelectorAll("#projectContainer > .card").forEach((e=>{e.classList.remove("active")})),t.classList.add("active"),await w(e)}));const r=document.createElement("img");r.src="images/edit.png",r.addEventListener("click",(()=>{const n=function(e,t){const n=document.createElement("form");n.classList.add("form");const c=document.createElement("input");c.type="text",c.name="title",c.value=e.title;const o=document.createElement("button");return o.type="submit",o.textContent="Update Project",n.appendChild(c),n.appendChild(o),n.addEventListener("submit",(async c=>{c.preventDefault();const o=c.target.elements.title.value;await a.editProject(e,o),t.replaceWith(await C(e)),c.target.reset(),n.style.display="none",await f()})),n}(e,t);t.replaceWith(n)}));const s=document.createElement("img");return s.src="images/delete.png",s.addEventListener("click",(async n=>{n.preventDefault(),await a.deleteProject(e),t.remove()})),n.appendChild(o),c.appendChild(r),c.appendChild(s),t.appendChild(n),t.appendChild(c),t}async function D(){const e=document.querySelector("#content");return e.textContent="",document.querySelectorAll(".card").forEach((e=>{e.classList.remove("active")})),document.querySelector("#allItems a:first-child").classList.add("active"),(await c.getAllTotalItems()).forEach((async t=>{const n=await v(t);e.appendChild(n)})),e}async function f(){const e=document.querySelector("#projectContainer");return e.textContent="",(await a.getAllProjects()).forEach((async t=>{const n=await C(t);e.appendChild(n)})),e}async function w(e){const t=document.querySelector("#content");return t.textContent="",e.array.forEach((async e=>{const n=await v(e);t.appendChild(n)})),t}g.array.push(E),console.log("This seem to be working..."),async function(e){D(),f();const t=document.querySelectorAll("#allItems a");t.forEach((e=>{e.addEventListener("click",(e=>{t.forEach((e=>{e.classList.remove("active")})),e.target.classList.add("active"),document.querySelectorAll(".card").forEach((e=>{e.classList.remove("active")}))}))})),document.querySelector("#allItems a:first-child").addEventListener("click",(async()=>{await D()})),document.querySelector("#allItems a:nth-child(2)").addEventListener("click",(async()=>{await async function(){const e=document.querySelector("#content");return e.textContent="",(await c.getAllDailyItems()).forEach((async t=>{const n=await v(t);e.appendChild(n)})),e}()})),document.querySelector("#allItems a:nth-child(3)").addEventListener("click",(async()=>{await async function(){const e=document.querySelector("#content");return e.textContent="",(await c.getAllWeeklyItems()).forEach((async t=>{const n=await v(t);e.appendChild(n)})),e}()})),document.querySelector("#newTaskBtn").addEventListener("click",(()=>{!function(){const e=document.querySelector("#content"),t=document.createElement("form");t.classList.add("form");const c=document.createElement("input");c.type="text",c.name="title",c.placeholder="Title",c.required=!0;const o=document.createElement("textarea");o.name="description",o.placeholder="Description";const r=document.createElement("select");r.name="project",a.getAllProjects().forEach((e=>{const t=document.createElement("option");t.value=e.title,t.text=e.title,r.appendChild(t)}));const s=document.createElement("option");s.value="noProject",s.text="No Project",r.appendChild(s);const i=document.createElement("select");i.name="priority";const l=document.createElement("option");l.value="low",l.text="Low Priority",i.appendChild(l);const d=document.createElement("option");d.value="medium",d.text="Medium Priority",i.appendChild(d);const m=document.createElement("option");m.value="high",m.text="High Priority",i.appendChild(m);const u=document.createElement("input");u.type="date",u.name="dueDate",u.required=!0;const p=document.createElement("input");p.type="checkbox",p.name="isDone";const h=document.createElement("label");h.textContent="Completed",h.appendChild(p);const y=document.createElement("button");y.type="submit",y.textContent="Create Item",t.appendChild(c),t.appendChild(o),t.appendChild(r),t.appendChild(i),t.appendChild(u),t.appendChild(h),t.appendChild(y),t.addEventListener("submit",(async e=>{e.preventDefault();const c=e.target.elements.project.value,o=a.getProjectByTitle(c),r=e.target.elements.title.value,s=e.target.elements.description.value,i=e.target.elements.priority.value,l=new Date(e.target.elements.dueDate.value);l.setHours(0,0,0,0);const d=e.target.elements.isDone.checked;"noProject"===c?(await n.createItem(r,s,i,l,d),e.target.reset(),t.style.display="none",await D()):o&&(await a.addProjectItem(o,r,s,i,l,d),e.target.reset(),t.style.display="none",await w(o))})),e.appendChild(t)}()})),document.querySelector("#newProjectBtn").addEventListener("click",(()=>{!function(){const e=document.querySelector("#content"),t=document.createElement("form");t.classList.add("form");const n=document.createElement("input");n.type="text",n.name="title",n.placeholder="Title",n.required=!0;const c=document.createElement("button");c.type="submit",c.textContent="Create Project",t.appendChild(n),t.appendChild(c),t.addEventListener("submit",(e=>{e.preventDefault();const n=e.target.elements.title.value;a.createProject(n),e.target.reset(),t.style.display="none",f()})),e.appendChild(t)}()}))}()})();